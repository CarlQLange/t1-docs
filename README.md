# Tessel Hardware API

## Changelog

* **0.1.0** &mdash; Pin interface, improved UART abstractions, parity with Tessel APIs.
* **0.0.1** &mdash; Initial release.


## API
<!-- generated by https://github.com/tcr/markdocs -->

### Pins
GPIO access exists on the hardware interface.

&#x20;<a href="#api-array-number-hardware-digital-" name="api-array-number-hardware-digital-">#</a> <i>array&lt;number&gt;</i>&nbsp; hardware<b>.digital</b> = []  
An array of which pins are digital inputs/outputs.

&#x20;<a href="#api-array-number-hardware-analog-" name="api-array-number-hardware-analog-">#</a> <i>array&lt;number&gt;</i>&nbsp; hardware<b>.analog</b> = []  
An array of which pins are analog inputs/outputs.

&#x20;<a href="#api-array-number-hardware-pwm-" name="api-array-number-hardware-pwm-">#</a> <i>array&lt;number&gt;</i>&nbsp; hardware<b>.pwm</b> = []  
An array of which pins are PWM outputs (may overlap analog array).

&#x20;<a href="#api-new-hardware-Pin-pin-dir-or-initialOutput-edge-" name="api-new-hardware-Pin-pin-dir-or-initialOutput-edge-">#</a> <i>new</i>&nbsp; hardware<b>.Pin</b> ( `pin`, `dir` or `initialOutput`, `edge` )  
Create and return `pin` object.

&#x20;<a href="#api-string-pin-type" name="api-string-pin-type">#</a> <i>string</i>&nbsp; pin<b>.type</b>  
"digital" or "analog".

&#x20;<a href="#api-boolean-pin-isPWM" name="api-boolean-pin-isPWM">#</a> <i>boolean</i>&nbsp; pin<b>.isPWM</b>  
Whether the `pin.type` is set to `"analog"` and output type is PWM (thus not true analog).

&#x20;<a href="#api-boolean-pin-readable" name="api-boolean-pin-readable">#</a> <i>boolean</i>&nbsp; pin<b>.readable</b>  
Whether the pin is readable.

&#x20;<a href="#api-boolean-pin-writeable" name="api-boolean-pin-writeable">#</a> <i>boolean</i>&nbsp; pin<b>.writeable</b>  
Whether the pin is writeable.

&#x20;<a href="#api-number-pin-resolution" name="api-number-pin-resolution">#</a> <i>number</i>&nbsp; pin<b>.resolution</b>  
Digital pins: 1. Analog pins: ADC resolution of output pins (e.g. 1024 for Tessel).

&#x20;<a href="#api-string-pin-direction" name="api-string-pin-direction">#</a> <i>string</i>&nbsp; pin<b>.direction</b>  
"output" or "input".

&#x20;<a href="#api-pin-setInput-callback-err-" name="api-pin-setInput-callback-err-">#</a> pin<b>.setInput</b>( [`callback`(`err`)] )  
Set `pin` to be an input. Sets `err` if the pin cannot be used as an input. 

&#x20;<a href="#api-pin-setOutput-initial-callback-err-" name="api-pin-setOutput-initial-callback-err-">#</a> pin<b>.setOutput</b> ( [`initial`], [`callback`(`err`)] )   
Set `pin` to be an output. Sets `err` if the pin cannot be used as an output.  

&#x20;<a href="#api-pin-write-value-callback-err-" name="api-pin-write-value-callback-err-">#</a> pin<b>.write</b> ( `value`, [`callback`(`err`)] )   
Write the `value` to an output pin. Digital pins: output is set HIGH if `value` is truthy, otherwise LOW. Analog pins: `value` is a float that sets the analog output value. Sets `err` if the pin cannot be used as a digital output or is not configured as an output.

&#x20;<a href="#api-pin-writeSync-value-" name="api-pin-writeSync-value-">#</a> pin<b>.writeSync</b> ( `value` )  
Synchronous version of `pin.write`. Throws on error.

&#x20;<a href="#api-pin-read-callback-err-value-" name="api-pin-read-callback-err-value-">#</a> pin<b>.read</b> ( `callback`(`err`, `value`) )   
Read a digital `value` from a digital input pin. `1` is returned if the value is HIGH, otherwise `0` if LOW. Sets `err` if the pin cannot be used as a digital input or is not configured as an input. An error is given to the callback if the pin cannot be used as a digital input or is not configured as an input.

&#x20;<a href="#api-pin-readSync-number" name="api-pin-readSync-number">#</a> pin<b>.readSync</b> () &rarr; <i>number</i>  
Synchronous version of `pin.read`. Throws on error.

&#x20;<a href="#api-pin-watchRise-onrise-err-time-" name="api-pin-watchRise-onrise-err-time-">#</a> pin<b>.watchRise</b> ( `onrise`(`err`, `time`) )    
Sets a listener for a rising signal edge on `pin`.

&#x20;<a href="#api-pin-unwatchRise-" name="api-pin-unwatchRise-">#</a> pin<b>.unwatchRise</b> ()    
Removes the listener for rising signal edge.

&#x20;<a href="#api-pin-watchFall-onfall-err-time-" name="api-pin-watchFall-onfall-err-time-">#</a> pin<b>.watchFall</b> ( `onfall`(`err`, `time`) )    
Sets a listener for a falling signal edge on `pin`.

&#x20;<a href="#api-pin-unwatchFall-" name="api-pin-unwatchFall-">#</a> pin<b>.unwatchFall</b> ()    
Removes the listener for the falling signal edge.

### SPI
A SPI channel.

&#x20;<a href="#api-new-hardware-SPI-idx-" name="api-new-hardware-SPI-idx-">#</a> <i>new</i>&nbsp; hardware<b>.SPI</b> ( [`idx`] )    
Creates a SPI channel.

&#x20;<a href="#api-spi-initialize-onconnected-err-" name="api-spi-initialize-onconnected-err-">#</a> spi<b>.initialize</b> ( `onconnected`(`err`) )    
Initializes the SPI channel.

&#x20;<a href="#api-spi-setClockSpeed-mhz-callback-err-" name="api-spi-setClockSpeed-mhz-callback-err-">#</a> spi<b>.setClockSpeed</b> ( `mhz`, [`callback`(`err`)] )   
Set the SPI output speed to the number `mhz`.

&#x20;<a href="#api-spi-setCPOL-cpol-callback-err-" name="api-spi-setCPOL-cpol-callback-err-">#</a> spi<b>.setCPOL</b> ( `cpol`, [`callback`(`err`)] )   
Set CPOL (SPI polarity). 

&#x20;<a href="#api-spi-setCPHA-cpha-callback-err-" name="api-spi-setCPHA-cpha-callback-err-">#</a> spi<b>.setCPHA</b> ( `cpha`, [`callback`(`err`)] )   
Set CPHA (SPI bit significance).

&#x20;<a href="#api-spi-transfer-txbuf-rxbuf-callback-err-rxbuf-" name="api-spi-transfer-txbuf-rxbuf-callback-err-rxbuf-">#</a> spi<b>.transfer</b> ( `txbuf`, [`rxbuf`,] `callback`(`err`, `rxbuf`) )  
Transfers a Buffer `txbuf` to the client and receives a response in `rxbuf`. If `rxbuf` is passed in, it is used as the receive buffer. Otherwise, a new buffer is allocated.

&#x20;<a href="#api-spi-transferSync-txbuf-Buffer" name="api-spi-transferSync-txbuf-Buffer">#</a> spi<b>.transferSync</b> ( `txbuf` ) &rarr; <i>Buffer</i>  
Synchronous version of `spi.transfer`. Throws on error.

&#x20;<a href="#api-spi-receive-len-rxbuf-callback-err-rxbuf-" name="api-spi-receive-len-rxbuf-callback-err-rxbuf-">#</a> spi<b>.receive</b> ( `len`, [`rxbuf`,] `callback`(`err`, `rxbuf`) )   
Reads `len` bytes from a client. If `rxbuf` is passed in, it is used as the receive buffer. Otherwise, a new buffer is allocated.

&#x20;<a href="#api-spi-receiveSync-len-Buffer" name="api-spi-receiveSync-len-Buffer">#</a> spi<b>.receiveSync</b> ( `len` ) &rarr; <i>Buffer</i>  
Synchronous version of `spi.receive`. Throws on error.

&#x20;<a href="#api-spi-send-txbuf-callback-err-" name="api-spi-send-txbuf-callback-err-">#</a> spi<b>.send</b> ( `txbuf`, `callback`(`err`) )   
Sends a Buffer `txbuf` to the client.

&#x20;<a href="#api-spi-sendSync-txbuf-" name="api-spi-sendSync-txbuf-">#</a> spi<b>.sendSync</b> ( `txbuf` )  
Synchronous version of `spi.send`. Throws on error.

### I2C
An I2C channel.

&#x20;<a href="#api-new-hardware-I2C-idx-" name="api-new-hardware-I2C-idx-">#</a> <i>new</i>&nbsp; hardware<b>.I2C</b> ( [`idx`] )    
Creates an I2C channel.

&#x20;<a href="#api-i2c-initialize-onconnected-err-" name="api-i2c-initialize-onconnected-err-">#</a> i2c<b>.initialize</b> ( `onconnected`(`err`) )    
Initializes the I2C channel.

&#x20;<a href="#api-i2c-transfer-address-writebuf-readcount-callback-err-data-" name="api-i2c-transfer-address-writebuf-readcount-callback-err-data-">#</a> i2c<b>.transfer</b> ( `address`, `writebuf`, `readcount`, `callback`(`err`, `data`) )    
Transfers the array of bytes `writebuf` to the device signified by `address` with `readcount` bytes.

&#x20;<a href="#api-i2c-read-address-readcount-callback-err-data-" name="api-i2c-read-address-readcount-callback-err-data-">#</a> i2c<b>.read</b> ( `address`, `readcount`, `callback`(`err`, `data`) )    
Reads `readcount` bytes from the device with the `address` on the bus.

&#x20;<a href="#api-i2c-write-address-writebuf-callback-err-" name="api-i2c-write-address-writebuf-callback-err-">#</a> i2c<b>.write</b> ( `address`, `writebuf`, `callback`(`err`) )    
Writes the array of bytes `writebuf` to the device with the `address` on the bus.

### UART
A UART channel.

&#x20;<a href="#api-new-hardware-UART-idx-options-" name="api-new-hardware-UART-idx-options-">#</a> <i>new</i>&nbsp; hardware<b>.UART</b> ( [`idx`[, `options`]] )  
Creates a UART channel. Defaults: `{"baudrate": 9600, "dataBits": 8, "parity": "even", "stopBits": 2}`

&#x20;<a href="#api-array-number-uart-baudRates-" name="api-array-number-uart-baudRates-">#</a> <i>array&lt;number&gt;</i>&nbsp; uart<b>.baudRates</b>   
An array of valid baud rates supported by the system.  

&#x20;<a href="#api-uart-initialize-onconnected-err-" name="api-uart-initialize-onconnected-err-">#</a> uart<b>.initialize</b> ( `onconnected`(`err`) )   
Initializes the UART connection.  

&#x20;<a href="#api-uart-setBaudRate-rate-callback-err-" name="api-uart-setBaudRate-rate-callback-err-">#</a> uart<b>.setBaudRate</b> ( `rate`, `callback`(`err`) )   
Sets the baud `rate` to a valid rate in `baudRates`.

&#x20;<a href="#api-uart-setDataBits-bits-callback-err-" name="api-uart-setDataBits-bits-callback-err-">#</a> uart<b>.setDataBits</b> ( `bits`, `callback`(`err`) )   
Sets the number of data `bits` to the number 5, 6, 7, or 8.

&#x20;<a href="#api-uart-setStopBits-bits-callback-err-" name="api-uart-setStopBits-bits-callback-err-">#</a> uart<b>.setStopBits</b> ( `bits`, `callback`(`err`) )   
Sets the number of data `bits` to the number 1 or 2.

&#x20;<a href="#api-uart-setParity-parity-callback-err-" name="api-uart-setParity-parity-callback-err-">#</a> uart<b>.setParity</b> ( `parity`, `callback`(`err`) )   
Sets the `parity` to the value "none", "odd", or "even".

&#x20;<a href="#api-uart-setDataListener-ondata-err-data-" name="api-uart-setDataListener-ondata-err-data-">#</a> uart<b>.setDataListener</b> ( `ondata`(`err`, `data`) )   
Set the new data listener function.  

&#x20;<a href="#api-uart-removeDataListener-" name="api-uart-removeDataListener-">#</a> uart<b>.removeDataListener</b>   
Removes datas listener attached to the port.  

&#x20;<a href="#api-uart-write-buf-callback-err-" name="api-uart-write-buf-callback-err-">#</a> uart<b>.write</b> ( `buf`, `callback`(`err`) )   
Writes a buffer to the UART connection.

### Signal
Signal output via buffers and simple animation protocols. High speed signals are implementation-dependent and use their own signal indexing scheme.

&#x20;<a href="#api-new-hardware-Signal-interface-signalidx-" name="api-new-hardware-Signal-interface-signalidx-">#</a> <i>new</i>&nbsp; hardware<b>.Signal</b> ( `interface`, `signalidx` )    
Creates a signal channel.

&#x20;<a href="#api-number-signal-maxSpeed" name="api-number-signal-maxSpeed">#</a> <i>number</i>&nbsp; signal<b>.maxSpeed</b>  
The maximum speed (in MHz) at which a signal can be emitted.

&#x20;<a href="#api-number-signal-idleBit-0-" name="api-number-signal-idleBit-0-">#</a> <i>number</i>&nbsp; signal<b>.idleBit</b> = 0   
The bit, truthy for HIGH and otherwise LOW, to be output while there is no signal. This value is writeable.  

&#x20;<a href="#api-signal-initialize-onconnected-err-" name="api-signal-initialize-onconnected-err-">#</a> signal<b>.initialize</b> ( `onconnected`(`err`) )   
Initializes the signal connection.

&#x20;<a href="#api-signal-setClockSpeed-MHz-callback-err-" name="api-signal-setClockSpeed-MHz-callback-err-">#</a> signal<b>.setClockSpeed</b> ( `MHz`, [`callback`(`err`)] )   
Set the signal output speed from `0` to `maxSpeed`.  

&#x20;<a href="#api-signal-stop-callback-err-" name="api-signal-stop-callback-err-">#</a> signal<b>.stop</b> ( [`callback`(`err`)] )   
Stop an ongoing signal.  

&#x20;<a href="#api-signal-loop-buf-onrepeat-err-" name="api-signal-loop-buf-onrepeat-err-">#</a> signal<b>.loop</b> ( `buf`, [`onrepeat`(`err`)] )   
Repeat the buffered signal.  

&#x20;<a href="#api-signal-send-buf-onfinished-err-" name="api-signal-send-buf-onfinished-err-">#</a> signal<b>.send</b> ( `buf`, [`onfinished`(`err`)] )   
Send a signal, calling the callback when completed.  

&#x20;<a href="#api-signal-queue-buf-onfinished-err-" name="api-signal-queue-buf-onfinished-err-">#</a> signal<b>.queue</b> ( `buf`, [`onfinished`(`err`)] )   
Queue a signal for when the current signal completes.  


## License

MIT
